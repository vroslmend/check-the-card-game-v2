"use client"

import { motion } from "framer-motion"

const signaturePath =
  "M 27.757 252.314 Q 27.73 252.206 27.582 251.923 Q 27.433 251.639 27.352 251.558 Q 27.109 251.45 26.475 251.248 Q 25.84 251.045 25.111 250.789 Q 24.382 250.532 23.734 250.316 Q 23.086 250.1 22.816 250.019 Q 22.762 249.992 22.546 249.871 Q 22.33 249.749 22.06 249.601 Q 21.79 249.452 21.574 249.344 Q 21.358 249.236 21.277 249.236 Q 20.872 249.236 20.508 249.749 Q 20.143 250.262 19.765 251.005 Q 19.387 251.747 18.982 252.584 Q 18.577 253.421 18.064 254.11 Q 17.551 254.798 16.957 255.176 Q 16.363 255.554 15.607 255.338 L 15.607 254.582 Q 15.769 254.393 16.093 253.975 Q 16.417 253.556 16.835 253.03 Q 17.254 252.503 17.713 251.936 Q 18.172 251.369 18.577 250.829 Q 18.982 250.289 19.293 249.871 Q 19.603 249.452 19.765 249.236 Q 20.035 248.885 19.86 248.21 Q 19.684 247.535 19.32 246.779 Q 18.955 246.023 18.537 245.254 Q 18.118 244.484 17.943 243.931 Q 17.767 243.377 17.97 243.134 Q 18.172 242.891 19.063 243.188 Q 19.333 244.106 19.887 245.078 Q 20.44 246.05 21.277 246.59 Q 21.979 246.131 22.6 245.362 Q 23.221 244.592 23.761 243.607 Q 24.301 242.621 24.747 241.514 Q 25.192 240.407 25.557 239.327 Q 25.921 238.247 26.191 237.275 Q 26.461 236.303 26.623 235.601 Q 26.812 235.304 27.123 235.129 Q 27.433 234.953 27.757 234.845 Q 27.892 235.034 27.946 235.804 Q 28 236.573 28 237.667 Q 28 238.76 27.96 240.11 Q 27.919 241.46 27.906 242.824 Q 27.892 244.187 27.919 245.483 Q 27.946 246.779 28.041 247.778 Q 28.135 248.777 28.338 249.398 Q 28.54 250.019 28.891 250.019 L 31.186 250.019 L 31.186 251.369 L 29.269 251.369 Q 28.891 251.369 28.972 251.869 Q 29.053 252.368 29.377 253.124 Q 29.701 253.88 30.12 254.812 Q 30.538 255.743 30.835 256.607 Q 31.132 257.471 31.173 258.16 Q 31.213 258.848 30.781 259.145 Q 30.7 259.199 30.403 259.199 Q 30.106 259.199 29.998 259.145 Q 29.917 258.74 29.593 257.768 Q 29.269 256.796 28.905 255.703 Q 28.54 254.609 28.203 253.651 Q 27.865 252.692 27.757 252.314 Z M 23.95 248.885 Q 24.085 248.966 24.45 249.115 Q 24.814 249.263 25.233 249.452 Q 25.651 249.641 26.056 249.79 Q 26.461 249.938 26.623 250.019 Q 26.677 250.046 26.799 250.046 Q 26.92 250.046 26.974 250.019 Q 27.082 249.128 26.988 247.765 Q 26.893 246.401 26.745 244.984 Q 26.596 243.566 26.448 242.257 Q 26.299 240.947 26.245 240.191 L 22.06 247.751 Q 22.141 247.832 22.425 247.994 Q 22.708 248.156 22.992 248.332 Q 23.275 248.507 23.559 248.669 Q 23.842 248.831 23.95 248.885 Z M 38.529 256.121 Q 38.583 255.257 38.597 254.285 Q 38.61 253.313 38.556 252.328 Q 38.502 251.342 38.408 250.37 Q 38.313 249.398 38.151 248.507 Q 37.827 246.914 37.355 246.077 Q 36.882 245.24 36.369 245.173 Q 35.856 245.105 35.411 245.834 Q 34.965 246.563 34.722 248.129 Q 34.668 248.372 34.614 248.885 Q 34.56 249.398 34.479 250.033 Q 34.398 250.667 34.317 251.369 Q 34.236 252.071 34.155 252.706 Q 34.074 253.34 34.047 253.84 Q 34.02 254.339 33.993 254.582 Q 33.831 254.933 33.48 255.001 Q 33.129 255.068 32.832 254.96 L 32.076 243.593 Q 32.049 243.296 32.211 243.094 Q 32.373 242.891 32.562 242.81 Q 32.751 242.729 32.94 242.81 Q 33.129 242.891 33.21 243.215 L 33.993 246.59 Q 34.668 244.97 35.235 244.282 Q 35.802 243.593 36.315 243.566 Q 36.828 243.539 37.274 244.052 Q 37.719 244.565 38.138 245.267 Q 38.556 245.969 38.921 246.766 Q 39.285 247.562 39.663 248.129 Q 40.581 245.051 41.715 243.688 Q 42.849 242.324 43.916 242.567 Q 44.982 242.81 45.792 244.606 Q 46.602 246.401 46.872 249.668 Q 46.926 250.181 46.94 250.991 Q 46.953 251.801 46.953 252.584 Q 46.953 253.367 46.94 253.961 Q 46.926 254.555 46.872 254.582 L 46.467 254.96 L 45.738 254.204 Q 45.846 253.097 45.792 251.855 Q 45.738 250.613 45.563 249.358 Q 45.387 248.102 45.117 246.928 Q 44.847 245.753 44.577 244.727 Q 44.28 243.863 43.848 243.715 Q 43.416 243.566 42.971 243.85 Q 42.525 244.133 42.147 244.727 Q 41.769 245.321 41.58 245.861 Q 41.445 246.185 41.256 246.725 Q 41.067 247.265 40.892 247.819 Q 40.716 248.372 40.581 248.791 Q 40.446 249.209 40.419 249.263 Q 40.365 249.668 40.244 250.627 Q 40.122 251.585 40.001 252.679 Q 39.879 253.772 39.785 254.744 Q 39.69 255.716 39.663 256.121 Q 39.663 256.445 39.488 256.486 Q 39.312 256.526 39.096 256.445 Q 38.853 256.364 38.529 256.121 Z M 54.837 256.121 Q 54.891 255.257 54.905 254.285 Q 54.918 253.313 54.864 252.328 Q 54.81 251.342 54.716 250.37 Q 54.621 249.398 54.459 248.507 Q 54.135 246.914 53.663 246.077 Q 53.19 245.24 52.677 245.173 Q 52.164 245.105 51.719 245.834 Q 51.273 246.563 51.03 248.129 Q 50.976 248.372 50.922 248.885 Q 50.868 249.398 50.787 250.033 Q 50.706 250.667 50.625 251.369 Q 50.544 252.071 50.463 252.706 Q 50.382 253.34 50.355 253.84 Q 50.328 254.339 50.301 254.582 Q 50.139 254.933 49.788 255.001 Q 49.437 255.068 49.14 254.96 L 48.384 243.593 Q 48.357 243.296 48.519 243.094 Q 48.681 242.891 48.87 242.81 Q 49.059 242.729 49.248 242.81 Q 49.437 242.891 49.518 243.215 L 50.301 246.59 Q 50.976 244.97 51.543 244.282 Q 52.11 243.593 52.623 243.566 Q 53.136 243.539 53.582 244.052 Q 54.027 244.565 54.446 245.267 Q 54.864 245.969 55.229 246.766 Q 55.593 247.562 55.971 248.129 Q 56.889 245.051 58.023 243.688 Q 59.157 242.324 60.224 242.567 Q 61.29 242.81 62.1 244.606 Q 62.91 246.401 63.18 249.668 Q 63.234 250.181 63.248 250.991 Q 63.261 251.801 63.261 252.584 Q 63.261 253.367 63.248 253.961 Q 63.234 254.555 63.18 254.582 L 62.775 254.96 L 62.046 254.204 Q 62.154 253.097 62.1 251.855 Q 62.046 250.613 61.871 249.358 Q 61.695 248.102 61.425 246.928 Q 61.155 245.753 60.885 244.727 Q 60.588 243.863 60.156 243.715 Q 59.724 243.566 59.279 243.85 Q 58.833 244.133 58.455 244.727 Q 58.077 245.321 57.888 245.861 Q 57.753 246.185 57.564 246.725 Q 57.375 247.265 57.2 247.819 Q 57.024 248.372 56.889 248.791 Q 56.754 249.209 56.727 249.263 Q 56.673 249.668 56.552 250.627 Q 56.43 251.585 56.309 252.679 Q 56.187 253.772 56.093 254.744 Q 55.998 255.716 55.971 256.121 Q 55.971 256.445 55.796 256.486 Q 55.62 256.526 55.404 256.445 Q 55.161 256.364 54.837 256.121 Z M 65.07 256.121 Q 64.638 255.203 64.597 254.258 Q 64.557 253.313 64.692 252.341 Q 64.719 252.017 64.8 251.41 Q 64.881 250.802 64.989 250.06 Q 65.097 249.317 65.232 248.48 Q 65.367 247.643 65.475 246.901 Q 65.583 246.158 65.677 245.591 Q 65.772 245.024 65.826 244.727 Q 65.988 243.809 66.204 243.161 Q 66.42 242.513 66.784 242.162 Q 67.149 241.811 67.729 241.784 Q 68.31 241.757 69.228 242.081 Q 69.336 242.108 69.471 242.257 Q 69.606 242.405 69.606 242.432 Q 69.66 242.729 69.781 243.323 Q 69.903 243.917 70.051 244.673 Q 70.2 245.429 70.375 246.239 Q 70.551 247.049 70.686 247.805 Q 70.821 248.561 70.942 249.155 Q 71.064 249.749 71.145 250.046 Q 71.469 251.585 71.955 252.193 Q 72.441 252.8 72.981 252.827 Q 73.521 252.854 74.115 252.463 Q 74.709 252.071 75.262 251.639 Q 75.816 251.207 76.329 250.91 Q 76.842 250.613 77.193 250.802 Q 77.193 251.207 77.004 251.599 Q 76.815 251.99 76.531 252.328 Q 76.248 252.665 75.924 252.962 Q 75.6 253.259 75.33 253.448 Q 74.088 254.258 73.278 254.299 Q 72.468 254.339 71.887 253.934 Q 71.307 253.529 70.956 252.8 Q 70.605 252.071 70.348 251.329 Q 70.092 250.586 69.835 250.006 Q 69.579 249.425 69.228 249.263 Q 69.147 249.56 68.944 250.249 Q 68.742 250.937 68.499 251.734 Q 68.256 252.53 68.04 253.232 Q 67.824 253.934 67.716 254.204 Q 67.689 254.312 67.554 254.623 Q 67.419 254.933 67.189 255.298 Q 66.96 255.662 66.69 256 Q 66.42 256.337 66.136 256.526 Q 65.853 256.715 65.569 256.648 Q 65.286 256.58 65.07 256.121 Z M 66.204 249.668 Q 66.177 249.938 66.163 250.64 Q 66.15 251.342 66.15 252.112 Q 66.15 252.881 66.163 253.597 Q 66.177 254.312 66.204 254.582 Q 66.96 253.421 67.567 251.882 Q 68.175 250.343 68.499 248.683 Q 68.823 247.022 68.755 245.402 Q 68.688 243.782 68.121 242.432 Q 67.716 243.134 67.392 244.16 Q 67.068 245.186 66.838 246.239 Q 66.609 247.292 66.433 248.237 Q 66.258 249.182 66.204 249.668 Z M 77.355 246.779 L 77.355 256.256 Q 77.031 256.985 76.788 256.999 Q 76.545 257.012 76.37 256.513 Q 76.194 256.013 76.1 255.109 Q 76.005 254.204 75.978 253.111 Q 75.951 252.017 75.965 250.816 Q 75.978 249.614 76.032 248.507 Q 76.086 247.4 76.181 246.469 Q 76.275 245.537 76.37 244.997 Q 76.464 244.457 76.572 244.403 Q 76.68 244.349 76.788 245.024 Q 77.49 244.484 78.3 244.012 Q 79.11 243.539 79.974 243.215 Q 80.838 242.891 81.729 242.81 Q 82.62 242.729 83.43 242.972 Q 83.538 243.269 83.457 243.634 Q 83.376 243.998 83.052 244.106 Q 82.701 244.052 82.134 244.052 Q 81.567 244.052 80.933 244.133 Q 80.298 244.214 79.65 244.403 Q 79.002 244.592 78.503 244.916 Q 78.003 245.24 77.679 245.686 Q 77.355 246.131 77.355 246.779 Z M 86.076 256.121 Q 85.887 255.743 85.968 255.311 Q 86.049 254.879 86.319 254.515 Q 86.589 254.15 86.967 253.867 Q 87.345 253.583 87.75 253.556 Q 88.155 253.529 88.533 253.745 Q 88.911 253.961 89.127 254.582 Q 89.289 254.96 89.167 255.325 Q 89.046 255.689 88.749 255.959 Q 88.452 256.229 88.074 256.405 Q 87.696 256.58 87.318 256.634 Q 86.94 256.688 86.602 256.567 Q 86.265 256.445 86.076 256.121 Z"

// By manual inspection, the path's actual width is slightly larger than what
// was in the original viewBox. We adjust it here to prevent clipping.
const viewBox = "15.607 234.845 120 24.354"
// It's a bit of a hack, but it works for this stable viewBox.
// For a dynamic viewBox, a more robust parsing solution would be better.
const [x, y, width, height] = viewBox.split(" ").map(parseFloat)

const reveal = {
  hidden: {
    // Start revealing from the left edge of the viewBox
    x: x,
    width: 0,
  },
  visible: {
    // Animate to the full width of the viewBox
    x: x,
    width: width,
    transition: {
      duration: 1.5,
      ease: "easeInOut",
    },
  },
}

export function Signature() {
  return (
    <motion.svg
      xmlns="http://www.w3.org/2000/svg"
      viewBox={viewBox}
      className="h-5 w-auto"
      data-cursor-icon
    >
      {/*
        A clipPath is used to mask the revealing rectangle. The path inside
        the clipPath is not rendered directly but serves as a stencil.
      */}
      <defs>
        <clipPath id="signature-clip">
          {/* This path defines the shape of the signature */}
          <path d={signaturePath} />
        </clipPath>
      </defs>

      {/*
        This rectangle is the visible element. It's filled with the foreground
        color and clipped by the "signature-clip" path. We animate its width
        from 0 to full to create the "drawing" effect.
      */}
      <motion.rect
        x={x}
        y={y}
        height={height}
        // The width is animated, but we set it to the full width initially
        // so that the clip path is applied correctly. Framer Motion will override
        // this with the variants.
        width={width}
        fill="hsl(var(--foreground))"
        clipPath="url(#signature-clip)"
        variants={reveal}
        initial="hidden"
        animate="visible"
      />
    </motion.svg>
  )
} 