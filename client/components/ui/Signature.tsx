"use client"

import { motion, MotionValue, useTransform, useAnimation, useInView } from "framer-motion"
import { useTheme } from "next-themes"
import { useEffect, useState } from "react"

// Please paste the long signature path string here, replacing the placeholder.
const signaturePath = "M 144.178 185.742 Q 141.141 185.742 139.528 184.317 Q 137.916 182.892 137.916 180.717 Q 137.916 178.58 139.491 176.067 Q 141.066 173.555 144.291 171.267 Q 146.053 169.992 147.759 169.336 Q 149.466 168.68 150.853 168.567 L 150.928 168.567 Q 151.228 168.567 151.378 168.68 Q 151.528 168.792 151.153 168.867 Q 149.728 169.017 148.134 169.823 Q 146.541 170.63 145.003 171.755 Q 142.116 173.93 140.766 175.992 Q 139.416 178.055 139.416 179.705 Q 139.416 181.655 141.103 182.836 Q 142.791 184.017 145.866 184.017 Q 149.766 184.017 153.891 182.611 Q 158.016 181.205 162.253 178.767 Q 166.491 176.33 170.616 173.292 Q 169.153 173.03 167.541 172.673 Q 165.928 172.317 165.028 171.755 Q 163.978 171.155 163.978 170.442 Q 163.978 170.105 164.166 169.88 Q 164.616 169.317 165.778 169.317 Q 166.753 169.317 167.991 169.655 Q 169.228 169.992 170.503 170.517 Q 171.778 171.042 172.828 171.642 Q 175.753 169.317 178.584 166.842 Q 181.416 164.367 184.041 161.855 Q 184.491 160.992 184.959 160.148 Q 185.428 159.305 185.916 158.517 Q 186.328 157.842 186.947 156.792 Q 187.566 155.742 188.391 154.673 Q 189.216 153.605 190.134 152.836 Q 191.053 152.067 191.991 151.955 Q 192.591 151.88 192.853 152.217 Q 193.116 152.555 193.116 152.967 Q 193.116 153.942 192.534 154.786 Q 191.953 155.63 191.203 156.38 Q 188.991 158.555 186.441 160.805 Q 184.603 163.88 183.084 167.161 Q 181.566 170.442 180.703 173.03 Q 182.278 172.88 183.609 172.542 Q 184.941 172.205 185.728 171.567 Q 186.516 170.93 186.441 169.917 L 186.441 169.88 Q 186.441 169.542 186.703 169.542 Q 187.116 169.542 187.116 170.18 Q 187.116 171.192 186.141 171.867 Q 185.166 172.542 183.666 172.955 Q 182.166 173.367 180.516 173.592 Q 180.253 174.492 180.028 175.317 Q 179.803 176.142 179.803 176.892 Q 179.803 177.342 179.897 177.736 Q 179.991 178.13 180.028 178.242 Q 180.178 178.767 179.653 179.198 Q 179.128 179.63 178.603 179.63 Q 178.078 179.63 177.966 179.18 Q 177.928 179.105 177.928 179.011 Q 177.928 178.917 177.891 178.767 Q 177.666 178.242 177.159 177.455 Q 176.653 176.667 176.091 175.88 Q 175.528 175.092 175.041 174.53 Q 174.553 173.967 174.366 173.93 Q 174.103 173.855 172.603 173.592 Q 172.341 173.555 172.022 173.498 Q 171.703 173.442 171.366 173.405 Q 167.878 175.955 164.334 178.205 Q 160.791 180.455 157.303 182.142 Q 153.816 183.83 150.497 184.786 Q 147.178 185.742 144.178 185.742 Z M 187.641 158.892 Q 189.441 157.205 191.053 155.48 Q 191.578 154.955 191.953 154.355 Q 192.328 153.755 192.328 153.53 Q 192.328 153.417 192.253 153.417 Q 192.066 153.417 191.466 154.017 Q 190.528 154.955 189.572 156.211 Q 188.616 157.467 187.641 158.892 Z M 177.216 173.142 Q 177.628 173.142 178.059 173.142 Q 178.491 173.142 178.941 173.105 Q 179.578 171.23 180.628 168.83 Q 181.678 166.43 182.916 163.992 Q 180.666 165.98 178.266 167.986 Q 175.866 169.992 173.353 171.942 Q 173.878 172.205 174.253 172.505 Q 174.628 172.805 174.891 173.03 Q 175.678 173.142 177.216 173.142 Z M 171.441 172.655 L 172.041 172.205 Q 170.878 171.605 169.678 171.23 Q 168.478 170.855 167.203 170.78 Q 167.053 170.742 166.903 170.742 Q 166.753 170.742 166.641 170.742 Q 166.003 170.742 166.003 170.93 Q 166.003 171.08 166.322 171.286 Q 166.641 171.492 166.941 171.605 Q 167.691 171.867 168.984 172.167 Q 170.278 172.467 171.441 172.655 Z M 173.203 172.88 L 172.566 172.505 L 172.228 172.805 Q 172.528 172.842 172.772 172.861 Q 173.016 172.88 173.203 172.88 Z M 177.891 177.267 Q 177.928 177.042 177.966 176.817 Q 178.003 176.592 178.041 176.33 Q 178.191 175.692 178.359 175.017 Q 178.528 174.342 178.753 173.742 Q 177.816 173.78 176.991 173.817 Q 176.166 173.855 175.603 173.817 Q 176.128 174.417 176.784 175.355 Q 177.441 176.292 177.891 177.267 Z M 186.326 178.58 Q 185.913 178.58 185.913 178.13 Q 185.913 177.605 186.438 176.63 Q 186.963 175.655 187.638 174.642 Q 188.313 173.63 188.763 172.992 Q 189.063 172.58 189.588 171.867 Q 190.113 171.155 190.676 170.311 Q 191.238 169.467 191.632 168.642 Q 192.026 167.817 192.026 167.18 Q 192.026 166.542 191.613 166.242 Q 191.238 165.942 191.238 165.605 Q 191.238 165.455 191.388 165.455 Q 191.576 165.455 191.838 165.642 Q 192.101 165.792 192.401 166.055 Q 192.701 166.317 192.963 166.655 Q 193.188 166.917 193.413 167.255 Q 193.638 167.592 193.638 168.042 Q 193.638 168.605 193.226 169.28 Q 192.551 170.442 191.651 171.417 Q 190.751 172.392 189.813 173.48 Q 188.801 174.642 187.994 175.636 Q 187.188 176.63 187.001 176.892 Q 187.413 176.405 188.369 175.43 Q 189.326 174.455 190.544 173.292 Q 191.763 172.13 193.019 171.061 Q 194.276 169.992 195.363 169.261 Q 196.451 168.53 197.088 168.492 Q 198.213 168.38 198.644 168.661 Q 199.076 168.942 199.132 169.392 Q 199.188 169.842 199.188 170.292 Q 199.188 170.78 198.963 171.548 Q 198.738 172.317 198.419 173.123 Q 198.101 173.93 197.819 174.567 Q 197.538 175.205 197.426 175.505 Q 197.763 175.242 198.363 174.455 Q 198.963 173.667 199.657 172.786 Q 200.351 171.905 200.913 171.417 Q 201.326 171.042 201.607 170.911 Q 201.888 170.78 202.038 170.78 Q 202.338 170.78 202.451 171.061 Q 202.563 171.342 202.601 171.605 Q 202.713 172.055 202.863 172.861 Q 203.013 173.667 203.369 174.548 Q 203.726 175.43 204.438 176.067 Q 204.738 176.33 205.113 176.423 Q 205.488 176.517 205.938 176.517 Q 206.688 176.517 207.551 176.273 Q 208.413 176.03 209.051 175.73 Q 210.626 174.942 212.107 173.855 Q 213.588 172.767 215.163 171.492 L 217.526 169.542 Q 217.826 169.317 217.901 169.317 Q 218.088 169.317 217.507 170.161 Q 216.926 171.005 215.651 172.092 Q 214.751 172.805 213.551 173.742 Q 212.351 174.68 211.019 175.523 Q 209.688 176.367 208.338 176.93 Q 207.626 177.192 206.969 177.38 Q 206.313 177.567 205.676 177.567 Q 204.288 177.567 203.444 176.948 Q 202.601 176.33 202.169 175.411 Q 201.738 174.492 201.532 173.611 Q 201.326 172.73 201.138 172.205 Q 200.501 172.767 199.844 173.611 Q 199.188 174.455 198.644 175.242 Q 198.101 176.03 197.801 176.405 Q 197.426 176.892 196.938 176.892 Q 196.563 176.892 196.357 176.592 Q 196.151 176.292 196.226 175.73 Q 196.301 175.242 196.619 174.342 Q 196.938 173.442 197.276 172.486 Q 197.613 171.53 197.688 170.892 Q 197.726 170.742 197.726 170.611 Q 197.726 170.48 197.726 170.405 Q 197.726 169.88 197.538 169.673 Q 197.351 169.467 197.051 169.467 Q 196.601 169.467 196.019 169.786 Q 195.438 170.105 194.988 170.405 Q 194.576 170.667 193.657 171.473 Q 192.738 172.28 191.688 173.255 Q 190.638 174.23 189.701 175.13 Q 188.913 175.88 188.201 176.686 Q 187.488 177.492 187.001 178.036 Q 186.513 178.58 186.326 178.58 Z M 212.049 178.58 Q 211.637 178.58 211.637 178.13 Q 211.637 177.605 212.162 176.63 Q 212.687 175.655 213.362 174.642 Q 214.037 173.63 214.487 172.992 Q 214.787 172.58 215.312 171.867 Q 215.837 171.155 216.399 170.311 Q 216.962 169.467 217.355 168.642 Q 217.749 167.817 217.749 167.18 Q 217.749 166.542 217.337 166.242 Q 216.962 165.942 216.962 165.605 Q 216.962 165.455 217.112 165.455 Q 217.299 165.455 217.562 165.642 Q 217.824 165.792 218.124 166.055 Q 218.424 166.317 218.687 166.655 Q 218.912 166.917 219.137 167.255 Q 219.362 167.592 219.362 168.042 Q 219.362 168.605 218.949 169.28 Q 218.274 170.442 217.374 171.417 Q 216.474 172.392 215.537 173.48 Q 214.524 174.642 213.718 175.636 Q 212.912 176.63 212.724 176.892 Q 213.137 176.405 214.093 175.43 Q 215.049 174.455 216.268 173.292 Q 217.487 172.13 218.743 171.061 Q 219.999 169.992 221.087 169.261 Q 222.174 168.53 222.812 168.492 Q 223.937 168.38 224.368 168.661 Q 224.799 168.942 224.855 169.392 Q 224.912 169.842 224.912 170.292 Q 224.912 170.78 224.687 171.548 Q 224.462 172.317 224.143 173.123 Q 223.824 173.93 223.543 174.567 Q 223.262 175.205 223.149 175.505 Q 223.487 175.242 224.087 174.455 Q 224.687 173.667 225.38 172.786 Q 226.074 171.905 226.637 171.417 Q 227.049 171.042 227.33 170.911 Q 227.612 170.78 227.762 170.78 Q 228.062 170.78 228.174 171.061 Q 228.287 171.342 228.324 171.605 Q 228.437 172.055 228.587 172.861 Q 228.737 173.667 229.093 174.548 Q 229.449 175.43 230.162 176.067 Q 230.462 176.33 230.837 176.423 Q 231.212 176.517 231.662 176.517 Q 232.412 176.517 233.274 176.273 Q 234.137 176.03 234.774 175.73 Q 236.349 174.942 237.83 173.855 Q 239.312 172.767 240.887 171.492 L 243.249 169.542 Q 243.549 169.317 243.624 169.317 Q 243.812 169.317 243.23 170.161 Q 242.649 171.005 241.374 172.092 Q 240.474 172.805 239.274 173.742 Q 238.074 174.68 236.743 175.523 Q 235.412 176.367 234.062 176.93 Q 233.349 177.192 232.693 177.38 Q 232.037 177.567 231.399 177.567 Q 230.012 177.567 229.168 176.948 Q 228.324 176.33 227.893 175.411 Q 227.462 174.492 227.255 173.611 Q 227.049 172.73 226.862 172.205 Q 226.224 172.767 225.568 173.611 Q 224.912 174.455 224.368 175.242 Q 223.824 176.03 223.524 176.405 Q 223.149 176.892 222.662 176.892 Q 222.287 176.892 222.08 176.592 Q 221.874 176.292 221.949 175.73 Q 222.024 175.242 222.343 174.342 Q 222.662 173.442 222.999 172.486 Q 223.337 171.53 223.412 170.892 Q 223.449 170.742 223.449 170.611 Q 223.449 170.48 223.449 170.405 Q 223.449 169.88 223.262 169.673 Q 223.074 169.467 222.774 169.467 Q 222.324 169.467 221.743 169.786 Q 221.162 170.105 220.712 170.405 Q 220.299 170.667 219.38 171.473 Q 218.462 172.28 217.412 173.255 Q 216.362 174.23 215.424 175.13 Q 214.637 175.88 213.924 176.686 Q 213.212 177.492 212.724 178.036 Q 212.237 178.58 212.049 178.58 Z M 250.485 177.83 Q 249.36 177.83 248.517 177.267 Q 247.673 176.705 247.673 175.167 Q 247.71 174.38 247.954 173.536 Q 248.198 172.692 248.498 171.942 Q 248.01 172.505 247.035 173.442 Q 246.06 174.38 244.842 175.336 Q 243.623 176.292 242.348 176.967 Q 241.073 177.642 239.948 177.642 Q 238.823 177.642 238.11 176.817 Q 237.623 176.292 237.623 175.43 Q 237.623 174.342 238.392 173.011 Q 239.16 171.68 240.473 170.348 Q 241.785 169.017 243.492 167.892 Q 245.198 166.767 247.073 166.13 Q 249.098 165.417 250.598 165.417 Q 253.148 165.417 253.148 167.592 Q 253.148 167.78 253.129 167.986 Q 253.11 168.192 253.073 168.417 Q 252.998 168.867 252.792 169.13 Q 252.585 169.392 252.473 169.392 Q 252.285 169.392 252.398 168.98 Q 252.473 168.792 252.473 168.586 Q 252.473 168.38 252.473 168.23 Q 252.473 167.63 252.173 167.273 Q 251.873 166.917 251.123 166.917 Q 250.448 166.917 249.454 167.198 Q 248.46 167.48 247.335 167.911 Q 246.21 168.342 245.179 168.867 Q 244.148 169.392 243.473 169.917 Q 242.31 170.742 241.298 171.755 Q 240.285 172.767 239.61 173.723 Q 238.935 174.68 238.823 175.467 Q 238.785 175.58 238.785 175.692 Q 238.785 175.805 238.785 175.88 Q 238.785 176.555 239.067 176.817 Q 239.348 177.08 239.798 177.08 Q 240.473 177.08 241.354 176.667 Q 242.235 176.255 242.985 175.73 Q 243.735 175.205 244.035 174.942 Q 245.235 173.93 246.735 172.711 Q 248.235 171.492 249.398 170.442 Q 249.585 170.33 249.81 170.33 Q 250.335 170.33 250.673 170.592 Q 250.785 170.705 250.785 170.892 Q 250.785 171.08 250.692 171.361 Q 250.598 171.642 250.448 171.98 Q 249.81 173.292 249.398 174.342 Q 248.985 175.392 248.985 176.105 Q 248.985 177.23 250.223 177.23 Q 251.16 177.23 252.998 176.555 Q 254.985 175.805 256.973 174.492 Q 258.96 173.18 260.573 171.83 Q 260.985 171.492 261.323 171.267 Q 261.66 171.042 262.035 170.667 Q 262.11 170.63 262.223 170.63 Q 262.335 170.63 262.335 170.742 Q 262.335 170.855 262.185 171.042 Q 261.96 171.342 261.098 172.148 Q 260.235 172.955 258.96 173.948 Q 257.685 174.942 256.204 175.861 Q 254.723 176.78 253.223 177.305 Q 252.66 177.492 251.929 177.661 Q 251.198 177.83 250.485 177.83 Z M 265.147 183.98 Q 263.46 183.98 262.729 183.155 Q 261.997 182.33 261.997 181.055 Q 261.997 179.555 262.804 177.605 Q 263.61 175.655 264.922 173.648 Q 266.235 171.642 267.735 169.992 Q 267.06 170.18 266.46 170.18 Q 265.072 170.18 264.247 169.467 L 263.985 169.842 Q 263.722 170.217 263.066 170.892 Q 262.41 171.567 261.772 172.092 Q 260.16 173.442 258.379 174.642 Q 256.597 175.842 254.872 176.63 Q 253.147 177.417 251.647 177.53 Q 251.497 177.53 251.31 177.473 Q 251.122 177.417 251.122 177.342 Q 251.122 177.23 251.797 177.08 Q 253.11 176.817 254.704 175.973 Q 256.297 175.13 258.004 173.948 Q 259.71 172.767 261.285 171.492 Q 261.922 170.967 262.654 170.292 Q 263.385 169.617 263.947 169.092 Q 263.535 168.53 263.535 167.742 Q 263.535 166.88 264.004 165.998 Q 264.472 165.117 265.222 164.367 Q 265.972 163.617 266.816 163.148 Q 267.66 162.68 268.372 162.68 Q 268.972 162.68 268.972 163.167 Q 268.972 163.505 268.672 163.73 Q 268.41 163.955 267.791 164.573 Q 267.172 165.192 266.46 165.98 Q 265.747 166.767 265.185 167.498 Q 264.622 168.23 264.472 168.68 Q 264.622 168.942 264.885 169.148 Q 265.147 169.355 265.897 169.355 Q 266.872 169.355 267.754 168.961 Q 268.635 168.567 269.422 168.042 Q 269.647 167.967 269.835 167.967 Q 270.66 167.967 271.035 168.417 Q 271.185 168.642 270.66 169.242 Q 270.135 169.842 269.61 170.405 Q 268.522 171.567 267.397 173.048 Q 266.272 174.53 265.335 176.067 Q 264.397 177.605 263.835 178.992 Q 263.272 180.38 263.272 181.392 Q 263.272 182.217 263.722 182.705 Q 264.172 183.192 265.222 183.192 Q 265.672 183.192 266.235 183.08 Q 267.21 182.93 268.447 182.386 Q 269.685 181.842 270.922 181.148 Q 272.16 180.455 273.022 179.855 Q 273.097 179.817 273.172 179.817 Q 273.285 179.817 273.285 179.967 Q 273.285 180.117 273.135 180.192 Q 272.872 180.417 271.954 181.205 Q 271.035 181.992 269.666 182.78 Q 268.297 183.567 266.61 183.83 Q 266.235 183.867 265.86 183.923 Q 265.485 183.98 265.147 183.98 Z M 276.886 177.792 Q 276.136 177.792 276.136 177.005 Q 276.136 176.705 276.248 176.442 Q 276.436 175.917 277.054 175.73 Q 277.673 175.542 278.161 175.617 Q 278.498 175.655 278.498 176.067 Q 278.498 176.405 278.273 176.855 Q 278.048 177.305 277.654 177.548 Q 277.261 177.792 276.886 177.792 Z"


// By manual inspection, the path's actual width is slightly larger than what
// was in the original viewBox. We adjust it here to prevent clipping.
const viewBox = "137.916 151.955 138.97 34.025"
// It's a bit of a hack, but it works for this stable viewBox.
// For a dynamic viewBox, a more robust parsing solution would be better.
const [x, y, width, height] = viewBox.split(" ").map(parseFloat)

const pathSegments = signaturePath
  .split("M")
  .filter((d) => d.trim() !== "")
  .map((d) => "M" + d.trim())

const svgVariants = {
  hidden: { opacity: 0 },
  visible: {
    opacity: 1,
    transition: {
      staggerChildren: 0.1,
    },
  },
}

const pathVariants = {
  hidden: {
    pathLength: 0,
    opacity: 0,
  },
  visible: {
    pathLength: 1,
    opacity: 1,
    transition: {
      duration: 0.5,
      ease: "easeInOut",
    },
  },
}

export function Signature({ isInView }: { isInView: boolean }) {
  const { theme } = useTheme()

  return (
    <motion.svg
      xmlns="http://www.w3.org/2000/svg"
      viewBox={viewBox}
      className="h-5 w-auto text-current"
      variants={svgVariants}
      initial="hidden"
      animate={isInView ? "visible" : "hidden"}
      data-cursor-icon
    >
      {pathSegments.map((path, i) => (
        <motion.path
          key={i}
          d={path}
          fill="none"
          stroke="currentColor"
          strokeWidth="2"
          variants={pathVariants}
        />
      ))}
    </motion.svg>
  )
} 